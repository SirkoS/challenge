var Ot=Object.defineProperty;var _t=i=>{throw TypeError(i)};var Ct=(i,e,t)=>e in i?Ot(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var P=(i,e,t)=>Ct(i,typeof e!="symbol"?e+"":e,t),ft=(i,e,t)=>e.has(i)||_t("Cannot "+t);var r=(i,e,t)=>(ft(i,e,"read from private field"),t?t.call(i):e.get(i)),j=(i,e,t)=>e.has(i)?_t("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),R=(i,e,t,s)=>(ft(i,e,"write to private field"),s?s.call(i,t):e.set(i,t),t);import{d as yt,a as g,c as bt,t as C,e as gt}from"../chunks/Be7wiIRG.js";import{w as kt,ar as xt,C as E,y as St,x as K,z as f,A as v,B as _,g as u,F as nt,aq as wt}from"../chunks/BzbeKm7W.js";import{s as I}from"../chunks/BhoiRKAz.js";import{i as k}from"../chunks/CpCXCyIS.js";import{s as lt,e as at,i as ot}from"../chunks/DfGLnoS9.js";const dt=["hasSource","hasTarget","hasPart"];var W,X,Z;const F=class F{constructor({iri:e,shortIri:t,label:s,comment:n,isBlank:b}={}){j(this,X);P(this,"_iri");P(this,"_shortIri");P(this,"_label",{});P(this,"_comment",{});P(this,"_isBlank");P(this,"_constrained",[]);j(this,Z,"");this._iri=e,this._shortIri=t,this._isBlank=b??!e,typeof s=="string"?this._label[""]=s:this._label=Object.fromEntries(Object.entries(s??{}).filter(([m,S])=>S)),typeof n=="string"?this._comment[""]=n:this._comment=Object.fromEntries(Object.entries(n??{}).filter(([m,S])=>S))}clone(){return new F({iri:this._iri,shortiri:this._shortIri,label:JSON.parse(JSON.stringify(this._label)),comment:JSON.parse(JSON.stringify(this._comment)),isblank:this._isBlank})}setVariable(e){R(this,X,e)}getVariable(){return r(this,X)}getIri(){return this._iri}getShortIri(){return this._shortIri}isBlank(){return this._isBlank}setLabel(e,t){this._label[e]=t}getLabel(){for(const s of r(F,W))if(s in this._label)return this._label[s];let e=Object.values(this._label)[0];if(e)return e;const t=this._iri.split("/");return t.pop()||t.pop()||"[missing label]"}setComment(e,t){this._comment[e]=t}getComment(){for(const e of r(F,W))if(e in this._comment)return this._comment[e];return Object.values(this._comment)[0]}setRole(e){R(this,Z,e)}getRole(){return r(this,Z)}};W=new WeakMap,X=new WeakMap,Z=new WeakMap,j(F,W,["en",""]);let Q=F;var B,A,J,tt,N,G;class Et extends Q{constructor(){super(...arguments);j(this,B);j(this,A);j(this,J);j(this,tt);j(this,N,[]);j(this,G,[])}setProperty(t){if(!(t instanceof pt))throw new Error("Can only assign instances of Property!");t.setVariable(this),t.setRole("Property"),R(this,B,t)}setObjectOfInterest(t){if(!(t instanceof x))throw new Error("Can only assign instances of Entity!");t.setVariable(this),t.setRole("OoI"),R(this,A,t)}setMatrix(t){if(!(t instanceof x))throw new Error("Can only assign instances of Entity!");t.setVariable(this),t.setRole("Matrix"),R(this,J,t)}setStatisticalModifier(t){if(!(t instanceof x))throw new Error("Can only assign instances of Entity!");t.setVariable(this),t.setRole("StatisticalModifier"),R(this,tt,t)}addContextObject(t){if(!(t instanceof x))throw new Error("Can only assign instances of Entity!");t.setVariable(this),t.setRole("ContextObject"),r(this,N).push(t)}addConstraint(t,...s){if(!(t instanceof ut))throw new Error("Can only assign instances of Constraint!");if(s.some(n=>n.getVariable()!=this))throw Error("Can only constrain entities of the same variable!");if(r(this,G).includes(t)){const n=t.getEntities();for(const b of s)n.includes(b)||(t.addEntity(b),b._addConstraint(t));return}for(const n of s)t.addEntity(n),n._addConstraint(t);t.setRole("Constraint"),r(this,G).push(t)}getProperty(){return r(this,B)}getObjectOfInterest(){return r(this,A)}getMatrix(){return r(this,J)}getStatisticalModifier(){return r(this,tt)}getContextObjects(){return r(this,N).slice(0)}getConstraints(){return r(this,G).slice(0)}toString(){return`[Variable ${this._iri?`(${this._iri})`:"(_blank)"}`+(Object.values(this._label).length?`
  label:
`+Object.entries(this._label).map(([t,s])=>`    ${t}: ${s}`).join(`
`):"")+(Object.values(this._comment).length?`
  comment:
`+Object.entries(this._comment).map(([t,s])=>`    ${t}: ${s}`).join(`
`):"")+`
  Property:
${r(this,B)?r(this,B).toString().split(`
`).map(t=>`    ${t}`).join(`
`):"-"}
  ObjectOfInterest:
${r(this,A)?r(this,A).toString().split(`
`).map(t=>`    ${t}`).join(`
`):"-"}
  Matrix:
${r(this,J)?r(this,J).toString().split(`
`).map(t=>`    ${t}`).join(`
`):"-"}
  ContextObject:
${r(this,N).length?r(this,N).map(t=>t.toString().split(`
`).map(s=>`    ${s}`).join(`
`)).join(`
`):"-"}
]`}}B=new WeakMap,A=new WeakMap,J=new WeakMap,tt=new WeakMap,N=new WeakMap,G=new WeakMap;var et;class ut extends Q{constructor(){super(...arguments);j(this,et,[])}addEntity(t){r(this,et).push(t)}getEntities(){return r(this,et).slice(0)}toString(){return`[Constraint ${this._iri?`(${this._iri})`:"(_blank)"}`+(Object.values(this._label).length?`
  label:
`+Object.entries(this._label).map(([t,s])=>`    ${t}: ${s}`).join(`
`):"")+(Object.values(this._comment).length?`
  comment:
`+Object.entries(this._comment).map(([t,s])=>`    ${t}: ${s}`).join(`
`):"")+`
]`}}et=new WeakMap;var V,O;const vt=class vt extends Q{constructor(){super(...arguments);j(this,V,[]);j(this,O,{})}setVariable(t){super.setVariable(t),Object.values(r(this,O)).forEach(s=>s.forEach(n=>n.setVariable(t)))}_addConstraint(t){r(this,V).push(t)}addConstraint(t){r(this,V).push(t)}getConstraints(){return Array.from(r(this,V))}addComponent(t,s){if(!dt.includes(t))throw new Error("Invalid property to connect a System to its components: "+t);t in r(this,O)||(r(this,O)[t]=[]),s.setVariable(this.getVariable()),s.setRole("SystemComponent"),r(this,O)[t].push(s)}getComponents(){return Object.entries(r(this,O)).reduce((t,s)=>(t[s[0]]=Array.from(s[1]),t),{})}getComponentCount(){return Object.entries(r(this,O)).reduce((t,s)=>t+s[1].length,0)}isSystem(){return Object.keys(r(this,O)).length>0}toString(){return`[Entity ${this._iri?`(${this._iri})`:"(_blank)"}`+(Object.values(this._label).length?`
  label:
`+Object.entries(this._label).map(([t,s])=>`    ${t}: ${s}`).join(`
`):"")+(Object.values(this._comment).length?`
  comment:
`+Object.entries(this._comment).map(([t,s])=>`    ${t}: ${s}`).join(`
`):"")+(Object.values(r(this,V)).length?`
  constrained:
`+r(this,V).map(t=>t.toString().split(`
`).map(s=>`    ${s}`).join(`
`)).join(`
`):"-")+`
]`}clone(){const t=new vt({iri:this._iri,shortIri:this._shortIri,label:this._label,comment:this._comment,isBlank:this._isBlank});for(const s of r(this,V))t._addConstraint(s);for(const s in r(this,O))for(const n of r(this,O)[s])t.addComponent(s,n.clone());return t}};V=new WeakMap,O=new WeakMap;let x=vt;class pt extends x{toString(){return`[Entity ${this._iri?`(${this._iri})`:"(_blank)"}`+(Object.values(this._label).length?`
  label:
`+Object.entries(this._label).map(([e,t])=>`    ${e}: ${t}`).join(`
`):"")+(Object.values(this._comment).length?`
  comment:
`+Object.entries(this._comment).map(([e,t])=>`    ${e}: ${t}`).join(`
`):"")+`
]`}}function It(i){const e=new Et({iri:i["@id"],label:i.label,comment:i.comment}),t={};let s=L(i.property,pt,t);if(s&&e.setProperty(s),s=L(i.statisticalModifier,x,t),s&&e.setStatisticalModifier(s),s=L(i.ooi,x,t),s&&e.setObjectOfInterest(s),s=L(i.matrix,x,t),s&&e.setMatrix(s),i.context)for(const n of i.context)s=L(n,x,t),e.addContextObject(s);if(i.constraint)for(const n of i.constraint){let{constraint:b,entities:m}=Vt(n);m=m.map(S=>t[S]),e.addConstraint(b,...m)}return e}function L(i,e,t){if(!i)return;const s=new e({iri:i["@id"],label:i.label,comment:i.comment});t[s.getIri()]=s;for(const n of dt)if(n in i){const b=Array.isArray(i[n])?i[n].map(m=>L(m,e,t)):[L(i[n],e,t)];for(const m of b)s.addComponent(n,m),t[m.getIri()]=m}return s}function Vt(i){if(i)return{constraint:new ut({iri:i["@id"],label:i.label,comment:i.comment}),entities:i.constrains}}const D=(i,e=xt)=>{var t=bt(),s=K(t);{var n=b=>{var m=At(),S=f(m);{var st=l=>{var h=$t(),p=f(h,!0);v(h),E((w,d)=>{lt(h,"href",w),I(p,d)},[()=>e().getIri(),()=>e().getLabel()]),g(l,h)},ct=l=>{var h=gt();E(p=>I(h,p),[()=>e().getLabel()]),g(l,h)};k(S,l=>{e().getIri()?l(st):l(ct,!1)})}var T=_(S,2);{var ht=l=>{var h=zt(),p=f(h,!0);v(h),E(w=>I(p,w),[()=>e().getComment()]),g(l,h)};k(T,l=>{e().getComment()&&l(ht)})}var U=_(T,2);{var it=l=>{var h=Lt(),p=_(f(h),2);at(p,21,()=>e().getConstraints(),ot,(w,d)=>{var z=Rt(),q=f(z);{var M=a=>{var o=gt();E(y=>I(o,y),[()=>u(d).getLabel()]),g(a,o)},$=a=>{var o=Mt(),y=f(o,!0);v(o),E((H,jt)=>{lt(o,"href",H),I(y,jt)},[()=>u(d).getIri(),()=>u(d).getLabel()]),g(a,o)};k(q,a=>{u(d).isBlank()?a(M):a($,!1)})}var Y=_(q,2);{var c=a=>{var o=Pt(),y=f(o,!0);v(o),E(H=>I(y,H),[()=>u(d).getComment()]),g(a,o)};k(Y,a=>{u(d).getComment()&&a(c)})}v(z),g(w,z)}),v(p),v(h),g(l,h)};k(U,l=>{e().getConstraints().length>0&&l(it)})}var rt=_(U,2);{var mt=l=>{var h=bt(),p=K(h);at(p,17,()=>Object.entries(e().getComponents()),ot,(w,d)=>{let z=()=>u(d)[0],q=()=>u(d)[1];var M=Bt(),$=f(M),Y=f($,!0);v($);var c=_($,2);at(c,17,q,ot,(a,o)=>{D(a,()=>u(o))}),v(M),E(()=>I(Y,z())),g(w,M)}),g(l,h)};k(rt,l=>{e().getComponentCount()>0&&l(mt)})}v(m),g(b,m)};k(s,b=>{e()&&b(n)})}g(i,t)};var $t=C("<a> </a>"),zt=C('<p class="desc svelte-1ykg2kb"> </p>'),Mt=C("<a> </a>"),Pt=C('<p class="description"> </p>'),Rt=C('<li class="constraint-item"><!> <!></li>'),Lt=C('<div><span class="subheading">Constraint(s)</span> <ul class="constraint-list"></ul></div>'),Bt=C('<dl class="svelte-1ykg2kb"><dt class="subheading svelte-1ykg2kb"> </dt> <!></dl>'),At=C("<dd><!> <!> <!> <!></dd>"),Jt=C('<p style="font-style: italic; font-size: 90%; color: #444;"><a target="_blank"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 367.4 90" style="height: 1em;"><g fill="currentColor"><path d="m46.1 0c-25.5 0-46.1 20.6-46.1 46.1 0 20.4 13.2 37.7 31.5 43.8 2.3.4 3.2-1 3.2-2.2 0-1.1-.1-4.7-.1-8.6-11.6 2.1-14.6-2.8-15.5-5.4-.5-1.3-2.8-5.4-4.7-6.5-1.6-.9-3.9-3-.1-3.1 3.6-.1 6.2 3.3 7.1 4.7 4.2 7 10.8 5 13.4 3.8.4-3 1.6-5 2.9-6.2-10.3-1.2-21-5.1-21-22.8 0-5 1.8-9.2 4.7-12.4-.5-1.2-2.1-5.9.5-12.2 0 0 3.9-1.2 12.7 4.7 3.7-1 7.6-1.6 11.5-1.6s7.8.5 11.5 1.6c8.8-6 12.7-4.7 12.7-4.7 2.5 6.3.9 11.1.5 12.2 2.9 3.2 4.7 7.3 4.7 12.4 0 17.7-10.8 21.6-21.1 22.8 1.7 1.4 3.1 4.2 3.1 8.5 0 6.2-.1 11.1-.1 12.7 0 1.2.9 2.7 3.2 2.2 18.2-6.1 31.4-23.4 31.4-43.8.3-25.4-20.4-46-45.9-46z"></path><path d="m221.6 67.1h-.1zm0 0c-.5 0-1.8.3-3.2.3-4.4 0-5.9-2-5.9-4.6v-17.5h8.9c.5 0 .9-.4.9-1.1v-9.5c0-.5-.4-.9-.9-.9h-8.9v-11.7c0-.4-.3-.7-.8-.7h-12c-.5 0-.8.3-.8.7v12.1s-6.1 1.5-6.5 1.6-.7.5-.7.9v7.6c0 .6.4 1.1.9 1.1h6.2v18.3c0 13.6 9.5 15 16 15 3 0 6.5-.9 7.1-1.2.3-.1.5-.5.5-.9v-8.4c.1-.6-.3-1-.8-1.1zm132.2-12.2c0-10.1-4.1-11.4-8.4-11-3.3.2-6 1.9-6 1.9v19.6s2.7 1.9 6.8 2c5.8.2 7.6-1.9 7.6-12.5zm13.6-.9c0 19.1-6.2 24.6-17 24.6-9.1 0-14.1-4.6-14.1-4.6s-.2 2.6-.5 2.9c-.2.3-.4.4-.8.4h-8.3c-.6 0-1.1-.4-1.1-.9l.1-62c0-.5.4-.9.9-.9h11.9c.5 0 .9.4.9.9l-.1 20.9s4.6-3 11.3-3h.1c6.8-0 16.7 2.5 16.7 21.7zm-48.7-20.2h-11.7c-.6 0-.9.4-.9 1.1v30.3s-3.1 2.2-7.3 2.2-5.4-1.9-5.4-6.1v-26.5c0-.5-.4-.9-.9-.9h-11.9c-.5 0-.9.4-.9.9v28.5c0 12.3 6.9 15.3 16.3 15.3 7.8 0 14.1-4.3 14.1-4.3s.3 2.2.4 2.5.5.5.9.5h7.5c.6 0 .9-.4.9-.9l.1-41.7c-.1-.4-.6-.9-1.2-.9zm-132.2 0h-11.9c-.5 0-.9.5-.9 1.1v40.9c0 1.1.7 1.5 1.7 1.5h10.7c1.1 0 1.4-.5 1.4-1.5v-41.1c0-.5-.5-.9-1-.9zm-5.8-18.9c-4.3 0-7.7 3.4-7.7 7.7s3.4 7.7 7.7 7.7c4.2 0 7.6-3.4 7.6-7.7s-3.4-7.7-7.6-7.7zm92-1.4h-11.8c-.5 0-.9.4-.9.9v22.8h-18.5v-22.7c0-.5-.4-.9-.9-.9h-11.9c-.5 0-.9.4-.9.9v62c0 .5.5.9.9.9h11.9c.5 0 .9-.4.9-.9v-26.6h18.5l-.1 26.5c0 .5.4.9.9.9h11.9c.5 0 .9-.4.9-.9v-62c0-.4-.4-.9-.9-.9zm-105.3 27.5v32c0 .2-.1.6-.3.7 0 0-7 5-18.5 5-13.9 0-30.3-4.4-30.3-33 0-28.7 14.4-34.6 28.4-34.5 12.2 0 17.1 2.7 17.8 3.2.2.3.3.5.3.8l-2.3 9.9c0 .5-.5 1.1-1.1.9-2-.6-5-1.8-12.1-1.8-8.2 0-17 2.3-17 20.8s8.4 20.6 14.4 20.6c5.1 0 7-.6 7-.6v-12.8h-8.2c-.6 0-1.1-.4-1.1-.9v-10.3c0-.5.4-.9 1.1-.9h20.9c.6-.1 1 .4 1 .9z"></path></g></svg> Discuss this Variable on Github.</a></p>'),Nt=C('<dt class="svelte-1ykg2kb">Statistical Modifier</dt> <!>',1),qt=C('<dt class="svelte-1ykg2kb">Matrix</dt> <!>',1),Dt=C('<dt class="svelte-1ykg2kb">Context Objects</dt> <!>',1),Ft=yt(`<main class="svelte-1ykg2kb"><div class="svelte-1ykg2kb"><section><h2> </h2> <!> <p class="description"> </p></section> <section><dl class="svelte-1ykg2kb"><dt class="svelte-1ykg2kb">Property</dt> <!> <dt class="svelte-1ykg2kb">Object of Interest</dt> <!> <!> <!> <!></dl></section></div> <br> <div class="vis svelte-1ykg2kb"><iframe title="Visualization of the Variable" class="svelte-1ykg2kb"></iframe> <script>
      function updateVisSize( ev ) {
        // set the proper iframe ratio
        const iframe = document.querySelector( 'iframe' );
        const ratio = ev.data.width / ev.data.height;
        iframe.style.aspectRatio = ratio;
        // remove the listener
        window.removeEventListener( 'message', updateVisSize );
      }
      window.addEventListener( 'message', updateVisSize );
    <\/script></div></main>`);function Qt(i,e){kt(e,!0);const t=It(e.data.variable);var s=Ft(),n=f(s),b=f(n),m=f(b),S=f(m,!0);v(m);var st=_(m,2);{var ct=c=>{var a=Jt(),o=f(a);v(a),E(()=>lt(o,"href",e.data.issue)),g(c,a)};k(st,c=>{e.data.issue&&c(ct)})}var T=_(st,2),ht=f(T,!0);v(T),v(b);var U=_(b,2),it=f(U),rt=_(f(it),2),mt=nt(()=>t.getProperty());D(rt,()=>u(mt));var l=_(rt,4),h=nt(()=>t.getObjectOfInterest());D(l,()=>u(h));var p=_(l,2);{var w=c=>{var a=Nt(),o=_(K(a),2),y=nt(()=>t.getStatisticalModifier());D(o,()=>u(y)),g(c,a)};k(p,c=>{t.getStatisticalModifier()&&c(w)})}var d=_(p,2);{var z=c=>{var a=qt(),o=_(K(a),2),y=nt(()=>t.getMatrix());D(o,()=>u(y)),g(c,a)};k(d,c=>{t.getMatrix()&&c(z)})}var q=_(d,2);{var M=c=>{var a=Dt(),o=_(K(a),2);at(o,17,()=>t.getContextObjects(),ot,(y,H)=>{D(y,()=>u(H))}),g(c,a)};k(q,c=>{t.getContextObjects().length>0&&c(M)})}v(it),v(U),v(n);var $=_(n,4),Y=f($);wt(2),v($),v(s),E((c,a,o)=>{I(S,c),I(ht,a),lt(Y,"src",`https://sirkos.github.io/iadopt-vis/remote.html?jsonld=${o??""}`)},[()=>t.getLabel(),()=>t.getComment(),()=>encodeURIComponent(JSON.stringify(e.data.variable))]),g(i,s),St()}export{Qt as component};
